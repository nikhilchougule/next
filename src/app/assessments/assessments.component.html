<!-- ============================================================== -->
<!-- row -->
<!-- ============================================================== -->
<div fxLayout="row wrap">
    <!-- Card column -->
    <div fxFlex.gt-sm="100%" fxFlex="100">
        <mat-card>
            <mat-card-content>
                <mat-card-title>Assessment Batch</mat-card-title>

                <mat-horizontal-stepper [linear]="true" #stepper>
                    <mat-step>
                        <ng-template matStepLabel>Group</ng-template>

                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                            <!-- Checkbox Column -->
                            <ng-container matColumnDef="select">
                                <th mat-header-cell *matHeaderCellDef>
                                    <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()"
                                        [aria-label]="checkboxLabel()">
                                    </mat-checkbox>
                                </th>
                                <td mat-cell *matCellDef="let row">
                                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"
                                        [aria-label]="checkboxLabel(row)">
                                    </mat-checkbox>
                                </td>
                            </ng-container>

                            <!-- Position Column -->
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                            </ng-container>

                            <!-- Weight Column -->
                            <ng-container matColumnDef="Purpose">
                                <th mat-header-cell *matHeaderCellDef> Purpose </th>
                                <td mat-cell *matCellDef="let element"> {{element.Purpose}} </td>
                            </ng-container>

                            <!-- Symbol Column -->
                            <ng-container matColumnDef="Description">
                                <th mat-header-cell *matHeaderCellDef> Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row class="example-element-row" *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row);getRecord(stepper,row)" [ngClass]="{'activeRow': selectedRowIndex == row.position}">
                            </tr>
                        </table>
                        <div class="mat-button-group">
                            <button mat-raised-button class="btnMargin" color="primary" matStepperNext>Next</button>
                        </div>
                    </mat-step>
                    <mat-step>
                        <ng-template matStepLabel>DA List</ng-template>

                        <table mat-table [dataSource]="DAListSource" class="mat-elevation-z8">
                            <!-- Position Column -->
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                            </ng-container>
                            <!-- Actions Column -->
                            <ng-container matColumnDef="Actions">
                                <th mat-header-cell *matHeaderCellDef> Actions </th>
                                <td mat-cell *matCellDef="let element"> </td>
                            </ng-container>

                            <!-- DAList Column -->
                            <ng-container matColumnDef="DAList">
                                <th mat-header-cell *matHeaderCellDef> DAList </th>
                                <td mat-cell *matCellDef="let element"> {{element.DA_List}} </td>
                            </ng-container>

                            <!-- Description Column -->
                            <ng-container matColumnDef="Description">
                                <th mat-header-cell *matHeaderCellDef> Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                            </ng-container>

                            <!-- Purpose Column -->
                            <ng-container matColumnDef="Purpose">
                                <th mat-header-cell *matHeaderCellDef> Purpose </th>
                                <td mat-cell *matCellDef="let element"> {{element.Purpose}} </td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="DAListColumns"></tr>
                            <tr mat-row class="example-element-row" [ngClass]="{'activeRow': selectedDARowIndex == row.position}" *matRowDef="let row; columns: DAListColumns;" (click)="getDAList(row)">
                            </tr>
                        </table>
                        <div class="mat-button-group">
                            <button mat-raised-button class="btnMargin" (click)="stepper.reset()">Back</button>
                            <button mat-raised-button class="btnMargin" color="primary" matStepperNext>Next</button>
                        </div>
                        <!--DA List Details-->
                        <mat-accordion>

                            <mat-expansion-panel class="expansion-margin" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="expansion-title">
                                        DA List Details
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <table mat-table [dataSource]="DAListSource" class="mat-elevation-z8">
                                    <!-- Position Column -->
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef> No. </th>
                                        <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                                    </ng-container>
                                    <!-- Actions Column -->
                                    <ng-container matColumnDef="Actions">
                                        <th mat-header-cell *matHeaderCellDef> Actions </th>
                                        <td mat-cell *matCellDef="let element"> </td>
                                    </ng-container>

                                    <!-- DAList Column -->
                                    <ng-container matColumnDef="DAList">
                                        <th mat-header-cell *matHeaderCellDef> DAList </th>
                                        <td mat-cell *matCellDef="let element"> {{element.DA_List}} </td>
                                    </ng-container>

                                    <!-- Description Column -->
                                    <ng-container matColumnDef="Description">
                                        <th mat-header-cell *matHeaderCellDef> Description </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                                    </ng-container>

                                    <!-- Purpose Column -->
                                    <ng-container matColumnDef="Purpose">
                                        <th mat-header-cell *matHeaderCellDef> Purpose </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Purpose}} </td>
                                    </ng-container>


                                    <tr mat-header-row *matHeaderRowDef="DAListColumns"></tr>
                                    <tr mat-row class="example-element-row" [ngClass]="{'activeRow': selectedDADetailRowIndex == row.position}" *matRowDef="let row; columns: DAListColumns;" (click)="getDAListDetail(row)">
                                    </tr>
                                </table>
                            </mat-expansion-panel>
                        </mat-accordion>

                    </mat-step>
                    <mat-step>
                        <ng-template matStepLabel>Control List</ng-template>
                        <table mat-table [dataSource]="ControlListSource" class="mat-elevation-z8">
                            <!-- Position Column -->
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                            </ng-container>
                            <!-- Actions Column -->
                            <ng-container matColumnDef="Actions">
                                <th mat-header-cell *matHeaderCellDef> Actions </th>
                                <td mat-cell *matCellDef="let element">#</td>
                            </ng-container>

                            <!-- DAList Column -->
                            <ng-container matColumnDef="ControlList">
                                <th mat-header-cell *matHeaderCellDef> ControlList </th>
                                <td mat-cell *matCellDef="let element"> {{element.ControlList}} </td>
                            </ng-container>

                            <!-- Description Column -->
                            <ng-container matColumnDef="Description">
                                <th mat-header-cell *matHeaderCellDef> Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                            </ng-container>

                            <!-- Purpose Column -->
                            <ng-container matColumnDef="Purpose">
                                <th mat-header-cell *matHeaderCellDef> Purpose </th>
                                <td mat-cell *matCellDef="let element"> {{element.Purpose}} </td>
                            </ng-container>


                            <tr mat-header-row *matHeaderRowDef="ControlListColumns"></tr>
                            <tr mat-row class="example-element-row" [ngClass]="{'activeRow': selectedRowControlListIndex == row.position}" *matRowDef="let row; columns: ControlListColumns;"
                                (click)="getControlList(row)">
                            </tr>
                        </table>
                        <div class="mat-button-group">
                            <button mat-raised-button class="btnMargin" (click)="stepper.reset()">Back</button>
                            <button mat-raised-button class="btnMargin" color="primary" matStepperNext>Next</button>
                        </div>
                        <!--DA List Details-->
                        <mat-accordion>

                            <mat-expansion-panel class="expansion-margin" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="expansion-title">
                                        Control List Details
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <table mat-table [dataSource]="ControlListSource" class="mat-elevation-z8">
                                    <!-- Position Column -->
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef> No. </th>
                                        <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                                    </ng-container>
                                    <!-- Actions Column -->
                                    <ng-container matColumnDef="Actions">
                                        <th mat-header-cell *matHeaderCellDef> Actions </th>
                                        <td mat-cell *matCellDef="let element">#</td>
                                    </ng-container>

                                    <!-- DAList Column -->
                                    <ng-container matColumnDef="ControlList">
                                        <th mat-header-cell *matHeaderCellDef> ControlList </th>
                                        <td mat-cell *matCellDef="let element"> {{element.ControlList}} </td>
                                    </ng-container>

                                    <!-- Description Column -->
                                    <ng-container matColumnDef="Description">
                                        <th mat-header-cell *matHeaderCellDef> Description </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                                    </ng-container>

                                    <!-- Purpose Column -->
                                    <ng-container matColumnDef="Purpose">
                                        <th mat-header-cell *matHeaderCellDef> Purpose </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Purpose}} </td>
                                    </ng-container>


                                    <tr mat-header-row *matHeaderRowDef="ControlListColumns"></tr>
                                    <tr mat-row class="example-element-row" [ngClass]="{'activeRow': selectedControlListDetailRowIndex == row.position}" *matRowDef="let row; columns: ControlListColumns;"
                                    (click)="getControlListDetail(row)"> </tr>
                                </table>
                            </mat-expansion-panel>
                        </mat-accordion>

                    </mat-step>

                    <mat-step>
                        <ng-template matStepLabel>Assessment Batch</ng-template>
                        <table mat-table [dataSource]="AssessmentSource" class="mat-elevation-z8">
                            <!-- Position Column -->
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                            </ng-container>
                            <!-- Actions Column -->
                            <ng-container matColumnDef="Batch_Name">
                                <th mat-header-cell *matHeaderCellDef> Batch Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.Batch_Name}} </td>
                            </ng-container>

                            <!-- Description Column -->
                            <ng-container matColumnDef="Description">
                                <th mat-header-cell *matHeaderCellDef> Description </th>
                                <td mat-cell *matCellDef="let element"> {{element.Description}} </td>
                            </ng-container>

                            <!-- ControlList Column -->
                            <ng-container matColumnDef="ControlList">
                                <th mat-header-cell *matHeaderCellDef> ControlList </th>
                                <td mat-cell *matCellDef="let element"> {{element.ControlList}} </td>
                            </ng-container>


                            <!-- DA_List Column -->
                            <ng-container matColumnDef="DA_List">
                                <th mat-header-cell *matHeaderCellDef> DA List </th>
                                <td mat-cell *matCellDef="let element"> {{element.DA_List}} </td>
                            </ng-container>

                            <!-- Assignment_Status Column -->
                            <ng-container matColumnDef="Assignment_Status">
                                <th mat-header-cell *matHeaderCellDef> Assignment Status </th>
                                <td mat-cell *matCellDef="let element"> {{element.Assignment_Status}} </td>
                            </ng-container>

                            <!-- Owner Column -->
                            <ng-container matColumnDef="Owner">
                                <th mat-header-cell *matHeaderCellDef> Owner </th>
                                <td mat-cell *matCellDef="let element"> {{element.Owner}} </td>
                            </ng-container>
                            <!-- Owner Column -->
                            <ng-container matColumnDef="Creation_Date">
                                <th mat-header-cell *matHeaderCellDef> Creation Date Time </th>
                                <td mat-cell *matCellDef="let element"> {{element.Creation_Date}} </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="AssessmentColumns"></tr>
                            <tr mat-row class="example-element-row" [ngClass]="{'activeRow': selectedAssessmentRowIndex == row.position}" *matRowDef="let row; columns: AssessmentColumns;"
                                (click)="getAssessment(row)">
                            </tr>
                        </table>
                        <div class="mat-button-group">
                            <button mat-raised-button class="btnMargin" (click)="stepper.reset()">Back</button>
                            <button mat-raised-button class="btnMargin" color="primary" (click)="conductAssessment()">Conduct Assessment</button>
                            <button mat-raised-button class="btnMargin" color="primary" (click)="AssignTo()">AssignTo</button>

                        </div>
                    </mat-step>
                   
                   
                </mat-horizontal-stepper>

            </mat-card-content>

        </mat-card>
    </div>
</div>